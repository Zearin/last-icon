const CACHE={},DEBUG=window.LastIcon&&window.LastIcon.debug||!1,PRELOAD=window.LastIconPreload||{},FIX_FILL=["material","boxicons","fontawesome","eos"],ALIASES=Object.assign({bs:"bootstrap",bx:"boxicons",cs:"cssgg",gg:"cssgg",tb:"tabler",fa:"fontawesome",st:"supertiny",mi:"material",em:"emojicc",fl:"flags",in:"iconoir",eo:"eos"},window.LastIcon&&window.LastIcon.aliases||{}),ENABLE_ICONS=window.LastIcon&&window.LastIcon.fonts||[],FONT_ICONS={material:{class:"material-icons-{type}",types:{baseline:"",twotone:"two-tone"}},boxicons:{class:"bx {prefix}-{icon}"},bootstrap:{class:"bi-{icon}"},fontawesome:{class:"{prefix} fa-{icon}"},iconoir:{class:"iconoir-{icon}"},eos:{class:"eos-icons-{type}",types:{svg:""}}},TYPES=Object.assign({boxicons:"solid",fontawesome:"solid",material:"baseline",flags:"4x3",eos:"solid"},window.LastIcon&&window.LastIcon.types||{}),PREFIXES=Object.assign({boxicons:{solid:"bxs",regular:"bx",logos:"bxl"},fontawesome:{solid:"fas",regular:"far",light:"fal",duotone:"fad",brands:"fab"}},window.LastIcon&&window.LastIcon.prefixes||{}),DEFAULT_SET=window.LastIcon&&window.LastIcon.defaultSet||"tabler",DEFAULT_STROKE=window.LastIcon&&window.LastIcon.defaultStroke||2,PATHS=Object.assign({bootstrap:"https://cdn.jsdelivr.net/npm/bootstrap-icons@1/icons/{icon}.svg",boxicons:"https://cdn.jsdelivr.net/npm/boxicons@2/svg/{type}/{prefix}-{icon}.svg",cssgg:"https://cdn.jsdelivr.net/npm/css.gg@2/icons/svg/{icon}.svg",tabler:"https://cdn.jsdelivr.net/npm/@tabler/icons@1/icons/{icon}.svg",fontawesome:"https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/svgs/{type}/{icon}.svg",bytesize:"https://cdn.jsdelivr.net/npm/bytesize-icons@1/dist/icons/{icon}.svg",supertiny:"https://cdn.jsdelivr.net/npm/super-tiny-icons@0.4.0/images/svg/{icon}.svg",material:"https://cdn.jsdelivr.net/npm/@material-icons/svg@1/svg/{icon}/{type}.svg",flags:"https://cdn.jsdelivr.net/npm/flag-svg-collection@1/flags/{type}/{icon}.svg",emojicc:"https://cdn.jsdelivr.net/npm/emoji-cc@1/svg/{icon}.svg",iconoir:"https://cdn.jsdelivr.net/gh/lucaburgio/iconoir/icons/{icon}.svg",eos:"https://cdn.jsdelivr.net/gh/lekoala/eos-icons-mirror/{type}/{icon}.svg"},window.LastIcon&&window.LastIcon.paths||{});class LastIcon extends HTMLElement{constructor(){super()}static log(s){DEBUG&&console.log("[l-i] "+s)}static getIconSvg(s,e,t){let o=PATHS[e],n=e+"-"+s;return t&&(n+="-"+t),PRELOAD[n]?(LastIcon.log("Fetching "+n+" from preloaded cache"),PRELOAD[n]):o?(o=LastIcon.replacePlaceholders(o,s,e,t),o&&CACHE[n]?(LastIcon.log("Fetching "+n+" from cache"),CACHE[n]):(LastIcon.log("Fetching "+n+" from url "+o),CACHE[n]=fetch(o).then(function(s){if(200===s.status)return s.text();throw Error(s.status)}),CACHE[n])):new Promise(()=>{console.error(`Icon set ${e} does not exists`)})}static replacePlaceholders(s,e,t,o){let n=PREFIXES[t]&&PREFIXES[t][o]||null;return s=s.replace("{icon}",e),s=o?s.replace("{type}",o):s.replace("-{type}",""),n&&(s=s.replace("{prefix}",n)),s}static refreshIcon(s,e,t,o){if(ENABLE_ICONS.includes(t)){LastIcon.log("Using font for "+e);let n=FONT_ICONS[t].class,i=n.includes("{icon}"),c=o;return FONT_ICONS[t].types&&o in FONT_ICONS[t].types&&(c=FONT_ICONS[t].types[o]),n=LastIcon.replacePlaceholders(n,e,t,c),void(s.innerHTML=i?'<i class="'+n+'"></i>':'<i class="'+n+'">'+e+"</i>")}LastIcon.getIconSvg(e,t,o).then(e=>{s.stroke&&(e=e.replace(/stroke-width="([0-9]*)"/,'stroke-width="'+s.stroke+'"')),FIX_FILL.includes(s.set)&&(e=e.replace(/(<svg.*?)>/,'$1 fill="currentColor">')),s.innerHTML=e}).catch(t=>{s.innerHTML="⚠️",console.error(`Failed to load icon ${e} (error ${t})`)})}get type(){let s=this.getAttribute("type");return s=s||TYPES[this.set],s}get set(){let s=this.getAttribute("set")||DEFAULT_SET;return ALIASES[s]&&(s=ALIASES[s]),s}get stroke(){let s=this.getAttribute("stroke");return s||"tabler"!=this.set||(s=DEFAULT_STROKE),s}static get observedAttributes(){return["name"]}attributeChangedCallback(s,e,t){this.innerHTML="";let o=this.set,n=this.type;t&&LastIcon.refreshIcon(this,t,o,n)}connectedCallback(){}}customElements.define("l-i",LastIcon);